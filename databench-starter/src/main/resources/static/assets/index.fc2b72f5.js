var B=Object.defineProperty,G=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var I=(e,t,s)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,m=(e,t)=>{for(var s in t||(t={}))x.call(t,s)&&I(e,s,t[s]);if(b)for(var s of b(t))O.call(t,s)&&I(e,s,t[s]);return e},w=(e,t)=>G(e,K(t));var R=(e,t)=>{var s={};for(var r in e)x.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&b)for(var r of b(e))t.indexOf(r)<0&&O.call(e,r)&&(s[r]=e[r]);return s};import{c as q,R as f,u as A,l as L,o as F,a,b as U,d as V,e as H,m as C,r as p,f as j,P as M,H as Q,g as J,W as X,h as Y,i as Z,j as ee,k as te}from"./vendor.29638184.js";const se=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function s(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerpolicy&&(c.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?c.credentials="include":n.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(n){if(n.ep)return;n.ep=!0;const c=s(n);fetch(n.href,c)}};se();const re="modulepreload",z={},ne="/",D=function(t,s){return!s||s.length===0?t():Promise.all(s.map(r=>{if(r=`${ne}${r}`,r in z)return;z[r]=!0;const n=r.endsWith(".css"),c=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${c}`))return;const u=document.createElement("link");if(u.rel=n?"stylesheet":re,n||(u.as="script",u.crossOrigin=""),u.href=r,document.head.appendChild(u),n)return new Promise((g,y)=>{u.addEventListener("load",g),u.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())};const oe=e=>{const P=e,{className:t,size:s,color:r,href:n,link:c,disabled:u,children:g}=P,y=R(P,["className","size","color","href","link","disabled","children"]),S=q("btn",r?"color":"",c?"link":"button",t,{[`btn-${r}`]:r,disabled:u,[`btn-${s}`]:s});return c?f.createElement("a",m({className:S,href:n},y),g):f.createElement("button",w(m({disabled:u},y),{className:S}),g)},ae=[{path:"/uiTest",name:"UI\u6D4B\u8BD5\u9875\u9762"},{path:"/databench",name:"\u6570\u636E\u5F00\u53D1\u5DE5\u4F5C\u53F0"}];var ce=f.memo(()=>{const e=A();return f.createElement("div",{className:" p-25"},f.createElement("div",{className:" text-2xl mb-20"},"\u9996\u9875"),ae.map(t=>f.createElement(oe,{key:t.name,className:"mr-10",onClick:()=>e.push({pathname:t.path})},t.name)))});const ie=[{path:"/",exact:!0,component:ce},{path:"/databench",exact:!0,component:L(()=>D(()=>import("./index.46caf287.js").then(function(e){return e.i}),["assets/index.46caf287.js","assets/index.29d2e170.css","assets/vendor.29638184.js"]))},{path:"/uiTest",exact:!0,component:L(()=>D(()=>import("./index.c5ea30f1.js"),["assets/index.c5ea30f1.js","assets/vendor.29638184.js"]))},{path:"/test",exact:!0,component:L(()=>D(()=>import("./index.759720d0.js"),["assets/index.759720d0.js","assets/vendor.29638184.js"]))}],Ue=(e,t)=>{let s=m({},e);return t(s),s},W=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},N=(e,t)=>{const s=localStorage.getItem(e);return s===void 0||s==null?t:JSON.parse(s)};let E=0;const Ve=e=>{E+=1,setTimeout(()=>{E>0&&e(E==2),E=0},200)};var o=F.array(N("___tabs_caches",[]),{deep:!0}),i=F(N("___ui_setting",{theme:"dark",curTabKey:"",windowFooterSplitSize:300,windowFooterVsible:!1}));const le=a(()=>i.windowFooterVsible=!i.windowFooterVsible),ue=a(e=>i.windowFooterSplitSize=e);U(()=>{var e,t;W("___tabs_caches",o),W("___ui_setting",i),i.theme==="dark"?(e=document.querySelector("html"))==null||e.classList.add("dark"):(t=document.querySelector("html"))==null||t.classList.remove("dark")});const de=a(()=>{i.theme=i.theme==="dark"?"light":"dark"}),_=e=>o.find(t=>t.key===e),T=e=>o.findIndex(t=>t.key===e),fe=a(e=>{const{key:t,tmp:s}=e;let r=_(t);const n=o.findIndex(c=>c.tmp);r?i.curTabKey===t?s||(r.tmp=!1):h(t):n!==-1?(o[n]=e,h(t)):(o.splice(T(i.curTabKey)+1,0,e),h(t))}),h=a(e=>{i.curTabKey=e}),me=a(e=>{var s;const t=T(e);if(t!==-1&&(o.splice(t,1),e===i.curTabKey)){const r=t<o.length?t:t-1;r!==-1&&h((s=o[r])==null?void 0:s.key)}}),he=a(()=>{o.splice(0,o.length),i.curTabKey=""}),pe=a(e=>{const t=T(e);o.splice(0,t),o.splice(1,o.length-1),e!==i.curTabKey&&h(e)}),Te=a(e=>{o.splice(T(e)+1,o.length),e!==i.curTabKey&&h(e)}),ge=a(()=>{o.filter(e=>!e.changed).forEach(e=>{o.splice(T(e.key),1)}),!o.map(e=>e.key).includes(i.curTabKey)&&o.length>0&&h(o[0].key)}),ye=a(e=>{o.forEach(t=>{t.key===e&&(t.tmp=!1)})}),be=a((e,t)=>{const s=_(e);s&&(s.changed=t,t&&(s.tmp=!1))});var Ee={tabs:o,addTab:fe,changeTab:h,closeTab:me,closeAllTabs:he,closeOtherTabs:pe,closeToTheRightTabs:Te,closeSavedTabs:ge,keepTabOpen:ye,getTab:_,setTabChange:be,curTab:V(()=>_(i.curTabKey)),uiSetting:i,toggleTheme:de,toggleWindowFooterVisible:le,changeWindowFooterSplitSize:ue};const _e=H.create({baseURL:"/api",timeout:6e4}),ve=async e=>{try{const{data:t}=await _e.request(e);return t}catch(t){const s=t.message||"Request error";return{errorCdoe:-1,msg:s,data:null,success:!1}}},v=async e=>new Promise((t,s)=>ve(e).then(r=>{r.success?t(r.data):(C.error(r.msg),s(r.msg))})),we=async e=>v({url:e,method:"GET"}),Le=async(e,t,s)=>v(m({url:e,method:"POST",data:t},s)),De=async(e,t,s)=>v(m({url:e,method:"PUT",data:t},s)),Fe=async(e,t)=>v(m({url:e,method:"DELETE"},t));var d={GET:we,POST:Le,PUT:De,DELETE:Fe};const ke=e=>d.GET(`/biz/list?workspaceId=${e}`),k=(e,t,s)=>d.GET(`/tree?workspaceId=${e}&bizId=${s}&belong=${t}`),$e=e=>d.GET(`/file?fileId=${e}`),Se=e=>d.GET(`/file/deleteList?workspaceId=${e}`),He=e=>d.GET(`/biz/graph?bizId=${e}`),je=()=>d.GET("/node/output"),Pe=e=>d.PUT("/file/detail",e),Me=(e,t)=>d.POST("/file/commit?",{fileId:e,comment:t});function Ie(e){return d.GET(`/file/commit/list?fileId=${e}`)}const Qe=e=>d.POST("/folder",e),Je=e=>d.POST("/file",e),Xe=e=>d.PUT("/folder",e),Ye=e=>d.PUT("/file",e),Ze=(e,t,s,r)=>{let n=`/file/list?workspaceId=${e}&bizId=${t}&belong=${s}`;return r&&(n+=`&fileType=${r}`),d.GET(n)},l=F({id:0,name:"\u6D4B\u8BD5\u7A7A\u95F4",bizList:[],fileList:[]});l.id=1;const xe=a(async()=>{const e=l.id;let t=await ke(e);const s=t.map(r=>k(e,"development",r.id));return Promise.all(s).then(r=>{r.forEach((n,c)=>{t[c].bizTreeData=n}),p(()=>{l.bizList=t})})}),Oe=a(async e=>{const t=await $e(e),s=l.fileList.findIndex(n=>n.id===e),r=w(m({},t),{content:m({},t.content),id:e});return p(()=>{s===-1?l.fileList.push(r):l.fileList[s]=r}),t}),Re=a(async()=>{const e=await k(l.id,"query",-1);return p(()=>{l.tmpQueryTreeData=e}),e}),ze=a(async()=>{const e=await k(l.id,"resource",-1);return p(()=>{l.resourceTreeData=e}),e}),We=a(async()=>{const e=await Se(l.id);return l.deleteFileList=e,e}),$=e=>l.fileList.find(t=>t.id===e),Ce=(e,t)=>{const s=$(e);return s&&t(s)},Ne=a(e=>{const t=$(e);return t&&Pe(t).then(()=>{C.success("\u4FDD\u5B58\u6210\u529F!")})}),Be=a(async e=>{const t=await Ie(e);return t.sort((s,r)=>r.version-s.version),p(()=>{Ce(e,s=>s.commitRecords=t)}),t});var Ge={workspaceData:l,fetchBizList:xe,fetchFileDetail:Oe,changeFileContent:a((e,t)=>{const s=l.fileList.find(r=>r.id===e);s&&t(s.content)}),changeFileCfg:a((e,t)=>{const s=l.fileList.find(r=>r.id===e);s&&t(s.cfg)}),saveFile:Ne,getFileData:$,fetchTempQueryTreeData:Re,fetchResourceTreeData:ze,fetchDeleteFileList:We,fetchCommitRecords:Be},Ke={BenchStore:{uiStore:Ee,dataStore:Ge}};j.render(f.createElement(f.StrictMode,null,f.createElement(M,{stores:Ke},f.createElement(Q,null,J(ie)))),document.getElementById("root"));self.MonacoEnvironment={getWorker(e,t){return t==="json"?new X:t==="css"||t==="scss"||t==="less"?new Y:t==="html"||t==="handlebars"||t==="razor"?new Z:t==="typescript"||t==="javascript"?new ee:new te}};export{oe as B,Qe as a,Je as b,Ve as c,Ye as d,je as e,He as f,Ze as g,Me as h,Xe as m,Ue as n,d as r};
//# sourceMappingURL=index.fc2b72f5.js.map
